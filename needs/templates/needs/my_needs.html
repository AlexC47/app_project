{% extends 'base.html' %}
{% load static %}

{% block title %}
    <title>My needs</title>
{% endblock %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/my_needs.css' %}">
{% endblock %}


{% block content %}

<br>

<p2>Check out some available <a href="{% url 'needs:needs_templates_list' %}">needs</a></p2>

<div>
    You currently have {{ user_needs | length }} needs.
</div>

<ul>
        {% for need in user_needs %}
        <div class="need-box" display="flex">
                {% if need.is_active %}
                    <li>
                        <p>Name: {{ need.need.need.name }}
                            <a href="{% url 'needs:remove' need.id %}">X</a></p>

                        <p>Tag: {% for tag in need.need.tag.all %}
                                    {{ tag.name }}
                        {% endfor %}
                        </p>

                        {% if need.pending_list.exists %}
                        <p>Pending Friends: {% for friend in need.pending_list.all %}
                                    {{ friend.first_name }}
                            <a href="{% url 'needs:confirm' need.id friend.id %}">Confirm</a>
                        </p>
                        {% endfor %}
                        {% else %}
                            <p>No pending friends</p>
                        {% endif %}

                        {% if need.confirmed_with.exists %}
                        <p>Confirmed with: {% for friend in need.confirmed_with.all %}
                                    {{ friend.first_name }}
                        </p>
                        {% endfor %}
                        {% else %}
                            <p>Not confirmed with anyone yet...</p>
                        {% endif %}
                        <div>
                            <progress min="1" max="5" value="{{ need.scale_check }}" class="progressbar"></progress>
                        </div>
                    </li>
                {% endif %}
        </div>
        {% endfor %}
    </ul>


{% endblock %}
